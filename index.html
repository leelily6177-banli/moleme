<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摸了么</title>
    <style>
        :root {
            --bg-color: #f4f1ea;
            --card-bg: #ffffff;
            --text-main: #5a5a5a;
            --accent-green: #9fac96;
            --accent-blue: #a1b0bc;
            --accent-rose: #c29d91;
            --border-color: #e0ddd5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .app-container {
            width: 95%; max-width: 400px; background: var(--card-bg);
            border-radius: 20px; padding: 30px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color); position: relative;
        }

        /* 顶部段位标签 - 增加点击提示 */
        .rank-tag {
            position: absolute; top: -12px; right: 20px;
            background: var(--accent-rose); color: white;
            padding: 4px 15px; border-radius: 20px;
            font-size: 11px; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 10px rgba(194, 157, 145, 0.3);
        }

        header { text-align: center; margin-bottom: 25px; }
        h1 { font-size: 26px; color: var(--accent-green); letter-spacing: 3px; font-weight: 500; }
        .subtitle { font-size: 12px; color: #b5b1a8; margin-top: 5px; }

        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 12px; color: #888; margin-bottom: 6px; font-weight: 500;}
        input {
            width: 100%; padding: 12px; border: 1px solid var(--border-color);
            border-radius: 10px; background-color: #faf9f6;
            color: var(--text-main); outline: none; font-size: 16px;
        }

        .category-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .cat-item {
            padding: 10px 4px; border: 1px solid var(--border-color);
            border-radius: 8px; text-align: center; font-size: 12px;
            cursor: pointer; background: #fff; color: #888;
        }
        .cat-item.active { background-color: var(--accent-blue); color: white; border-color: var(--accent-blue); }
        .custom-add { border-style: dashed; border-width: 2px; color: #bbb; }

        .btn-start {
            width: 100%; padding: 16px; background-color: var(--accent-green);
            color: white; border: none; border-radius: 12px;
            font-size: 16px; font-weight: 600; cursor: pointer;
        }

        #running-zone { display: none; text-align: center; }
        .money-display { font-size: 44px; font-weight: 300; font-family: "Georgia", serif; margin: 20px 0; }
        .timer-info { display: flex; justify-content: space-around; margin-bottom: 25px; font-size: 13px; color: #999; }

        .btn-boss { background-color: var(--accent-rose); color: white; border: none; font-weight: 600; flex:1; padding:12px; border-radius:10px;}
        .btn-stop { flex:1; padding:12px; border-radius:10px; border: 1px solid var(--border-color); background:#fff; color:#888;}

        /* 通用弹窗蒙层 */
        .overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95); z-index: 10000; padding: 30px; overflow-y: auto;
        }

        /* 称号图鉴列表样式 */
        .rank-list-item {
            margin-bottom: 15px; padding: 12px; border-radius: 10px;
            border: 1px solid var(--border-color); background: #faf9f6;
        }
        .rank-list-item.current { border-color: var(--accent-rose); background: #fffefe; box-shadow: 0 4px 12px rgba(194,157,145,0.1); }
        .rank-list-title { font-weight: bold; font-size: 14px; margin-bottom: 4px; display: flex; justify-content: space-between; }
        .rank-list-desc { font-size: 12px; color: #888; line-height: 1.4; }
    </style>
</head>
<body>

    <div class="app-container">
        <!-- 称号标签 -->
        <div class="rank-tag" id="rank-name" onclick="showRankList()">罐头沙丁鱼</div>

        <div id="setup-zone">
            <header>
                <h1>摸了么</h1>
                <p class="subtitle">让摸鱼的每一秒都有价值</p>
            </header>

            <div class="form-group">
                <label>参考月薪 (RMB)</label>
                <input type="number" id="salary" value="5000">
            </div>

            <label>摸鱼项目</label>
            <div class="category-grid" id="cat-grid">
                <div class="cat-item active" onclick="sel(this)">带薪拉屎</div>
                <div class="cat-item" onclick="sel(this)">工位神游</div>
                <div class="cat-item" onclick="sel(this)">饮水工程</div>
                <div class="cat-item" onclick="sel(this)">水群吐槽</div>
                <div class="cat-item" onclick="sel(this)">虚假通勤</div>
                <div class="cat-item custom-add" id="custom-btn" onclick="addCustom()">+ 自定义</div>
            </div>

            <button class="btn-start" onclick="start()">开始摸鱼</button>
            <div style="margin-top:15px; font-size:10px; color:#ccc; text-align:center;">
                当前累计回收时长：<span id="total-min">0</span> 分钟
            </div>
        </div>

        <div id="running-zone">
            <div id="task-title" style="color:var(--accent-green); font-size:14px;">正在进行：带薪如厕</div>
            <div class="money-display" id="m-val">￥0.0000</div>
            <div class="timer-info">
                <div>时长: <span id="t-val">00:00:00</span></div>
                <div>时薪: <span id="r-val">0.00</span>元</div>
            </div>
            <div style="display:flex; gap:10px;">
                <button class="btn-boss" onclick="boss()">老板来了</button>
                <button class="btn-stop" onclick="stop()">收益结算</button>
            </div>
        </div>
    </div>

    <!-- 段位图鉴弹窗 -->
    <div id="rank-overlay" class="overlay" onclick="closeOverlays()">
        <h2 style="text-align:center; color:var(--accent-rose); margin-bottom:20px;">摸鱼段位图鉴</h2>
        <div id="rank-list-content"></div>
        <p style="text-align:center; font-size:12px; color:#ccc; margin-top:20px;">点击任意位置返回</p>
    </div>

    <!-- 老板掩护层 -->
    <div id="boss-overlay" class="overlay" onclick="closeOverlays()">
        <div id="b-content" style="max-width:600px; margin:auto; text-align:left; font-family:sans-serif; color:#333;"></div>
    </div>

    <script>
        let timer, startT, rate, activeTask = "带薪拉屎";
        let cumSeconds = parseInt(localStorage.getItem('m_cum_secs')) || 0;

        const ranks = [
            { name: "罐头沙丁鱼", min: 0, desc: "刚开始摸鱼，像沙丁鱼一样缩在工位里，战战兢兢。" },
            { name: "观赏小金鱼", min: 10, desc: "在工位的方寸之间游弋，看起来在忙，其实大脑一片空白。" },
            { name: "菜场大草鱼", min: 20, desc: "生命力顽强，能在枯燥的会议中翻白眼而不被发现。" },
            { name: "逆流三文鱼", min: 30, desc: "已经敢于逆着公司的奋斗口号而行，独自寻找平静的水域。" },
            { name: "深海金枪鱼", min: 40, desc: "游速极快，摸鱼效率极高，能在老板出现的瞬间切换到工作状态。" },
            { name: "孤傲旗鱼", min: 50, desc: "摸鱼界的精英，身手敏捷，能在多项考核中精准脱身。" },
            { name: "顶级大白鲨", min: 60, desc: "办公室生物链顶端。不是你在躲老板，而是老板路过你工位时都得加速。" }
        ];

        const lqQuotes = [
            "时间是人类发展的空间。一个人如果没有自由的时间，他连牛马都不如。",
            "资本是死劳动，它像吸血鬼一样，只有吮吸活劳动才有生命。",
            "工作日不仅有生理界限，而且有道德界限。",
            "工人不仅在劳动时生产他人的价值，而且他在不劳动时也为他人生产价值。",
            "资本来到世间，每个毛孔都滴着血和肮脏的东西。"
        ];

        // 初始化
        refreshRank();

        function refreshRank() {
            const currentMin = cumSeconds / 60;
            document.getElementById('total-min').innerText = Math.floor(currentMin);
            
            // 找到当前对应的等级
            let currentRank = ranks[0];
            for (let i = ranks.length - 1; i >= 0; i--) {
                if (currentMin >= ranks[i].min) {
                    currentRank = ranks[i];
                    break;
                }
            }
            document.getElementById('rank-name').innerText = currentRank.name;
        }

        function showRankList() {
            const container = document.getElementById('rank-list-content');
            const currentMin = cumSeconds / 60;
            container.innerHTML = "";

            ranks.forEach(r => {
                const isCurrent = currentMin >= r.min && (ranks[ranks.indexOf(r)+1] ? currentMin < ranks[ranks.indexOf(r)+1].min : true);
                const item = document.createElement('div');
                item.className = `rank-list-item ${isCurrent ? 'current' : ''}`;
                item.innerHTML = `
                    <div class="rank-list-title">
                        <span>${r.name}</span>
                        <span style="font-size:10px; color:${isCurrent ? 'var(--accent-rose)' : '#ccc'}">${r.min} min ${isCurrent ? ' (当前)' : ''}</span>
                    </div>
                    <div class="rank-list-desc">${r.desc}</div>
                `;
                container.appendChild(item);
            });
            document.getElementById('rank-overlay').style.display = 'block';
        }

        function addCustom() {
            const val = prompt("输入自定义摸鱼项目：", "发呆思考人生");
            if(val) {
                const btn = document.getElementById('custom-btn');
                btn.innerText = val; btn.classList.remove('custom-add'); sel(btn);
            }
        }

        function sel(el) {
            document.querySelectorAll('.cat-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active'); activeTask = el.innerText;
        }

        function start() {
            const sal = document.getElementById('salary').value;
            if(!sal) return alert("请输入月薪");
            rate = sal / 21.75 / 8 / 3600;
            document.getElementById('r-val').innerText = (rate * 3600).toFixed(2);
            document.getElementById('task-title').innerText = "正在进行：" + activeTask;
            document.getElementById('setup-zone').style.display = 'none';
            document.getElementById('running-zone').style.display = 'block';
            startT = new Date(); timer = setInterval(upd, 100);
        }

        function upd() {
            const elap = (new Date() - startT) / 1000;
            document.getElementById('m-val').innerText = "￥" + (elap * rate).toFixed(4);
            const h = Math.floor(elap / 3600).toString().padStart(2, '0');
            const m = Math.floor((elap % 3600) / 60).toString().padStart(2, '0');
            const s = Math.floor(elap % 60).toString().padStart(2, '0');
            document.getElementById('t-val').innerText = `${h}:${m}:${s}`;
        }

        function stop() {
            clearInterval(timer);
            const thisSecs = Math.floor((new Date() - startT) / 1000);
            cumSeconds += thisSecs;
            localStorage.setItem('m_cum_secs', cumSeconds);
            const mon = document.getElementById('m-val').innerText;
            const q = lqQuotes[Math.floor(Math.random() * lqQuotes.length)];
            alert(`收网成功！\n在【${activeTask}】期间，你夺回了 ${mon} 剩余价值。\n\nLQ提醒你：\n“${q}”`);
            location.reload();
        }

        function boss() {
            const m = document.getElementById('boss-overlay');
            const c = document.getElementById('b-content');
            const contents = [
                {t:"Q1 穿透式业务审计", c:"基于当前宏观环境，我们需持续优化链路成本，实现降本增效目标..."},
                {t:"分布式架构演进说明", c:"[INFO] Initializing clusters... [WARN] Cache hit rate dropped to 64.2%..."},
                {t:"私域流量池沉淀方法论", c:"通过高频触达建立用户心智，关注情感连接。"}
            ];
            const s = contents[Math.floor(Math.random()*contents.length)];
            c.innerHTML = `<h2 style="border-bottom:1px solid #ddd; padding-bottom:10px; margin-bottom:15px;">${s.t}</h2><p style="line-height:1.6;">${s.c}</p>`;
            m.style.display = 'block';
        }

        function closeOverlays() {
            document.getElementById('rank-overlay').style.display = 'none';
            document.getElementById('boss-overlay').style.display = 'none';
        }
    </script>
</body>
</html>
